<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ç”Ÿæ´»ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«é›†</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
      --bg-color: #f9f9f9;
      --text-color: #000;
      --card-bg: #ffffff;
    }
    body.dark {
      --bg-color: #121212;
      --text-color: #ffffff;
      --card-bg: #1e1e1e;
    }
    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: background-color 0.3s, color 0.3s;
    }
    .navbar {
      background-color: var(--card-bg);
      padding: 1rem;
      border-bottom: 1px solid #ddd;
    }
    .tab-content > .tab-pane {
      padding: 2rem 1rem;
      background-color: var(--card-bg);
      border-radius: 8px;
      margin-top: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    textarea, input[type=file], input[type=text] {
      width: 100%;
      margin-top: 0.5rem;
    }
    button {
      margin-top: 1rem;
    }
    .output {
      margin-top: 1rem;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <nav class="navbar d-flex justify-content-between align-items-center">
    <h1 class="h4 mb-0">ğŸ§° ç”Ÿæ´»ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«é›†</h1>
    <button class="btn btn-outline-secondary" onclick="toggleDarkMode()">ğŸŒ“ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</button>
  </nav>

  <div class="container mt-4">
    <ul class="nav nav-pills nav-fill mb-3" id="toolTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="char-tab" data-bs-toggle="tab" data-bs-target="#char" type="button" role="tab">âœï¸ æ–‡å­—æ•°</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="qr-tab" data-bs-toggle="tab" data-bs-target="#qr" type="button" role="tab">ğŸ”³ QRç”Ÿæˆ</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="img-tab" data-bs-toggle="tab" data-bs-target="#img" type="button" role="tab">ğŸ–¼ï¸ ç”»åƒåœ§ç¸®</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="pdf-tab" data-bs-toggle="tab" data-bs-target="#pdf" type="button" role="tab">ğŸ“ PDFçµåˆ</button>
      </li>
    </ul>

    <div class="tab-content">
      <div class="tab-pane fade show active" id="char" role="tabpanel">
        <h2>âœï¸ æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ</h2>
        <p>æ–‡ç« ã‚’å…¥åŠ›ã—ã¦ã€æ–‡å­—æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚</p>
        <textarea id="charText" rows="4" placeholder="ã“ã“ã«æ–‡ç« ã‚’å…¥åŠ›"></textarea>
        <button class="btn btn-primary" onclick="countChars()">ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹</button>
        <div class="output" id="charCount"></div>
      </div>

      <div class="tab-pane fade" id="qr" role="tabpanel">
        <h2>ğŸ”³ QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ</h2>
        <p>URLã‚„ãƒ†ã‚­ã‚¹ãƒˆã‚’QRã‚³ãƒ¼ãƒ‰ã«å¤‰æ›ã—ã¾ã™ã€‚</p>
        <input id="qrText" type="text" class="form-control" placeholder="https://example.com">
        <button class="btn btn-success" onclick="generateQR()">QRã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ</button>
        <div id="qrcode" class="text-center mt-3"></div>
      </div>

      <div class="tab-pane fade" id="img" role="tabpanel">
        <h2>ğŸ–¼ï¸ ç”»åƒåœ§ç¸®</h2>
        <p>ç”»åƒã‚µã‚¤ã‚ºã‚’å°ã•ãã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚</p>
        <input type="file" id="imgInput" accept="image/*">
        <button class="btn btn-warning" onclick="compressImage()">ç”»åƒã‚’åœ§ç¸®</button>
        <div id="compressedResult" class="mt-3"></div>
      </div>

      <div class="tab-pane fade" id="pdf" role="tabpanel">
        <h2>ğŸ“ PDFçµåˆ</h2>
        <p>è¤‡æ•°ã®PDFã‚’ä¸€ã¤ã«ã¾ã¨ã‚ã¾ã™ã€‚</p>
        <input type="file" id="pdfs" multiple accept="application/pdf">
        <button class="btn btn-danger" onclick="mergePDFs()">PDFã‚’çµåˆ</button>
        <div id="pdfResult" class="mt-3"></div>
      </div>
    </div>

    <div class="text-center mt-5">
      <a href="https://www.buymeacoffee.com/yourname" target="_blank">
        <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" style="height: 45px; width: 162px;">
      </a>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function toggleDarkMode() {
      document.body.classList.toggle('dark');
    }
    function countChars() {
      const text = document.getElementById('charText').value;
      document.getElementById('charCount').innerText = `æ–‡å­—æ•°: ${text.length}`;
    }
    function generateQR() {
      document.getElementById('qrcode').innerHTML = '';
      new QRCode(document.getElementById('qrcode'), document.getElementById('qrText').value);
    }
    async function compressImage() {
      const file = document.getElementById('imgInput').files[0];
      if (!file) return;
      const img = new Image();
      img.src = URL.createObjectURL(file);
      img.onload = () => {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = img.width / 2;
        canvas.height = img.height / 2;
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
        canvas.toBlob(blob => {
          const url = URL.createObjectURL(blob);
          const link = document.createElement('a');
          link.href = url;
          link.download = 'compressed.jpg';
          link.innerText = 'åœ§ç¸®ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰';
          document.getElementById('compressedResult').innerHTML = '';
          document.getElementById('compressedResult').appendChild(link);
        }, 'image/jpeg', 0.7);
      };
    }
    async function mergePDFs() {
      const files = document.getElementById('pdfs').files;
      if (files.length < 2) return alert('æœ€ä½2ã¤ã®PDFãŒå¿…è¦ã§ã™');
      const mergedPdf = await PDFLib.PDFDocument.create();
      for (const file of files) {
        const bytes = await file.arrayBuffer();
        const pdf = await PDFLib.PDFDocument.load(bytes);
        const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
        copiedPages.forEach(p => mergedPdf.addPage(p));
      }
      const mergedBytes = await mergedPdf.save();
      const blob = new Blob([mergedBytes], { type: 'application/pdf' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'merged.pdf';
      link.innerText = 'çµåˆPDFã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰';
      document.getElementById('pdfResult').innerHTML = '';
      document.getElementById('pdfResult').appendChild(link);
    }
  </script>
</body>
</html>
